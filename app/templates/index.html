<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotka-Volterra Simulator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        input {
            margin-bottom: 10px;
            padding: 5px;
        }
        canvas {
            max-width: 100%;
        }
    </style>
</head>
<body>

    <h1>Lotka-Volterra Predator-Prey Model</h1>
    <p>Adjust the parameters below to simulate population dynamics:</p>

    <form id="simulation-form">
        <label for="x0">Initial Prey Population (x0):</label>
        <input type="number" id="x0" name="x0" step="0.1" value="10"><br>

        <label for="y0">Initial Predator Population (y0):</label>
        <input type="number" id="y0" name="y0" step="0.1" value="5"><br>

        <label for="alpha">Prey Birth Rate (α):</label>
        <input type="number" id="alpha" name="alpha" step="0.1" value="1.1"><br>

        <label for="beta">Predation Rate (β):</label>
        <input type="number" id="beta" name="beta" step="0.01" value="0.02"><br>

        <label for="gamma">Predator Death Rate (γ):</label>
        <input type="number" id="gamma" name="gamma" step="0.1" value="1.5"><br>

        <label for="delta">Predator Growth Rate (δ):</label>
        <input type="number" id="delta" name="delta" step="0.01" value="0.01"><br>

        <label for="T">Time Period (T):</label>
        <input type="number" id="T" name="T" step="1" value="50"><br>

        <button type="submit">Simulate</button>
    </form>

    <canvas id="resultsChart"></canvas>

    <script>
        document.getElementById('simulation-form').addEventListener('submit', async function(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = {
                x0: parseFloat(formData.get('x0')),
                y0: parseFloat(formData.get('y0')),
                alpha: parseFloat(formData.get('alpha')),
                beta: parseFloat(formData.get('beta')),
                gamma: parseFloat(formData.get('gamma')),
                delta: parseFloat(formData.get('delta')),
                T: parseInt(formData.get('T'))
            };

            const response = await fetch("/simulate/", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            });

            const result = await response.json();
            plotResults(result.time, result.prey, result.predator);
        });

        function plotResults(time, prey, predator) {
            const ctx = document.getElementById('resultsChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: time,
                    datasets: [{
                        label: 'Prey Population',
                        data: prey,
                        borderColor: 'blue',
                        fill: false,
                    },
                    {
                        label: 'Predator Population',
                        data: predator,
                        borderColor: 'red',
                        fill: false,
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: { title: { display: true, text: 'Time' } },
                        y: { title: { display: true, text: 'Population' } }
                    }
                }
            });
        }
    </script>

</body>
</html>

